import{m as Y,t as W,u as D,aC as z,p as w,ag as K,o as V,r as $,b as h,f as N}from"./el-button-BPh_G9Ns.js";import{$ as T,ab as O,A as j,R as q,B as J,af as Q,c as Z,E as g,au as P,a7 as y,d as F,j as ee,f as x,N as oe}from"./index-DoZiZmvY.js";import{b as te}from"./index-CBLBCCTW.js";var f=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(f||{});const S=e=>{const n=T(e)?e:[e],t=[];return n.forEach(o=>{var u;T(o)?t.push(...S(o)):O(o)&&T(o.children)?t.push(...S(o.children)):(t.push(o),O(o)&&((u=o.component)!=null&&u.subTree)&&t.push(...S(o.component.subTree)))}),t},le=(e,n,t,o)=>{let u={offsetX:0,offsetY:0};const r=d=>{const v=d.clientX,_=d.clientY,{offsetX:E,offsetY:p}=u,c=e.value.getBoundingClientRect(),M=c.left,L=c.top,k=c.width,H=c.height,B=document.documentElement.clientWidth,I=document.documentElement.clientHeight,X=-M+E,R=-L+p,G=B-M-k+E,U=I-L-H+p,b=A=>{let l=E+A.clientX-v,m=p+A.clientY-_;o!=null&&o.value||(l=Math.min(Math.max(l,X),G),m=Math.min(Math.max(m,R),U)),u={offsetX:l,offsetY:m},e.value&&(e.value.style.transform=`translate(${Y(l)}, ${Y(m)})`)},C=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",C)},s=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",r)},a=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",r)},i=()=>{u={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return j(()=>{q(()=>{t.value?s():a()})}),J(()=>{a()}),{resetPosition:i}},me=(e,n={})=>{Q(e)||W("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||D("popup"),o=Z(()=>t.bm("parent","hidden"));if(!z||w(document.body,o.value))return;let u=0,r=!1,s="0";const a=()=>{setTimeout(()=>{typeof document>"u"||($(document==null?void 0:document.body,o.value),r&&document&&(document.body.style.width=s))},200)};g(e,i=>{if(!i){a();return}r=!w(document.body,o.value),r&&(s=document.body.style.width),u=te(t.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,v=K(document.body,"overflowY");u>0&&(d||v==="scroll")&&r&&(document.body.style.width=`calc(100% - ${u}px)`),V(document.body,o.value)}),P(()=>a())},ne=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let n=!1,t=!1;return{onClick:s=>{n&&t&&e(s),n=t=!1},onMousedown:s=>{n=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},se=h({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:N([String,Array,Object])},zIndex:{type:N([String,Number])}}),ue={click:e=>e instanceof MouseEvent},re="overlay";var ae=F({name:"ElOverlay",props:se,emits:ue,setup(e,{slots:n,emit:t}){const o=D(re),u=i=>{t("click",i)},{onClick:r,onMousedown:s,onMouseup:a}=ne(e.customMaskEvent?void 0:u);return()=>e.mask?ee("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:s,onMouseup:a},[x(n,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):oe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(n,"default")])}});const fe=ae;export{fe as E,me as a,ne as b,S as f,le as u};
